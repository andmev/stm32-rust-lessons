"use strict";(()=>{(function(){"use strict";let o=!1;function c(){return"startViewTransition"in document}function m(e){let t=e.getAttribute("href");if(!t||e.target==="_blank"||e.hasAttribute("download")||t.startsWith("#")||t.startsWith("mailto:")||t.startsWith("tel:")||t.startsWith("javascript:"))return!1;try{return new URL(t,window.location.origin).origin===window.location.origin}catch{return!1}}async function i(e,t=!1){if(!o){o=!0;try{let n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let s=await n.text(),r=new DOMParser().parseFromString(s,"text/html");document.title=r.title;let d=document.querySelector("main"),u=r.querySelector("main");d&&u&&d.replaceWith(u);let w=document.querySelector("header"),f=r.querySelector("header");w&&f&&w.replaceWith(f);let h=document.querySelector("footer"),g=r.querySelector("footer");h&&g&&h.replaceWith(g),t?window.history.replaceState({},"",e):window.history.pushState({},"",e),window.dispatchEvent(new Event("page-transition"))}catch(n){console.error("Navigation failed:",n),window.location.href=e}finally{o=!1}}}function a(){if(!c()){console.warn("View Transition API not supported in this browser");return}document.addEventListener("click",async e=>{let t=e.target.closest("a[href]");if(!t||!m(t))return;let n=t.getAttribute("href");if(n)if(e.preventDefault(),document.startViewTransition){let s=document.startViewTransition(()=>{i(n,!1)});try{await s.finished}catch(l){console.error("View transition failed:",l)}}else i(n,!1)}),window.addEventListener("popstate",async e=>{if(!(!c()||o))if(document.startViewTransition){let t=document.startViewTransition(()=>{i(window.location.pathname,!0)});try{await t.finished}catch(n){console.error("View transition failed:",n)}}else i(window.location.pathname,!0)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a(),window.ViewTransitionNavigation={init:a,navigate:i}})();console.log("STM32 Rust Lessons - Loaded");document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded and parsed"),window.addEventListener("page-transition",()=>{console.log("Page transition completed")})});})();
